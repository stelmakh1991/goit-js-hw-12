{"version":3,"file":"commonHelpers.js","sources":["../src/js/api/base-url.js","../src/js/api/api.js","../src/img/iconClose.svg","../src/img/iconSuccess.svg","../src/img/iconWarning.svg","../src/js/component/izToast.js","../src/js/component/gallery.js","../src/js/component/selectors.js","../src/main.js"],"sourcesContent":["export const BASE_URL = 'https://pixabay.com/api/';","import axios from 'axios';\nimport { BASE_URL } from './base-url';\n\nexport const fetchImagesParams = {\n  key: '42137546-386b5be41212ccd429cab5a80',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safeSearch: true,\n  per_page: 15,\n  q: undefined,\n  page: 1,\n};\n\nexport async function fetchImages(q = 'flower', page = 20) {\n  fetchImagesParams.q = q;\n  fetchImagesParams.page = page;\n  return axios.get(BASE_URL, { params: { ...fetchImagesParams, page, q } });\n}","export default \"__VITE_ASSET__f2a4cc3f__\"","export default \"__VITE_ASSET__54aa501e__\"","export default \"__VITE_ASSET__216437a4__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport iconClose from '/img/iconClose.svg';\nimport iconSuccess from '/img/iconSuccess.svg';\nimport iconWarning from '/img/iconWarning.svg';\n\nconst toastOptions = {\n  titleColor: '#FFFFFF',\n  messageColor: '#FFFFFF',\n  messageSize: '16px',\n  position: 'topRight',\n  displayMode: 'replace',\n  closeOnEscape: true,\n  pauseOnHover: false,\n  maxWidth: 432,\n  messageSize: '16px',\n  messageLineHeight: '24px',\n};\n\nexport function toastError(message) {\n  iziToast.show({\n    message,\n    backgroundColor: '#EF4040',\n    progressBarColor: '#FFE0AC',\n    iconUrl: iconClose,\n    ...toastOptions,\n  });\n}\n\nexport function toastSuccess(message) {\n  iziToast.show({\n    message,\n    backgroundColor: '#59A10D',\n    progressBarColor: '#B5EA7C',\n    iconUrl: iconSuccess,\n    ...toastOptions,\n  });\n}\n\nexport function toastWarning(message) {\n  iziToast.show({\n    message,\n    backgroundColor: '#FFA500',\n    progressBarColor: '#708090',\n    iconUrl: iconWarning,\n    ...toastOptions,\n  });\n}","export const GALLERY_LINK = 'gallery-link';\n\nexport function createGallery({\n  largeImageURL,\n  tags,\n  webformatURL,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<a href=\"${largeImageURL}\" class=\"${GALLERY_LINK}\">\n    <figure>\n     <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\">\n     <figcaption class=\"gallery__figcaption\">\n       <div class=\"image-item\">Likes <span class=\"image-elem\">${likes}</span></div>\n       <div class=\"image-item\">Views <span class=\"image-elem\">${views}</span></div>\n       <div class=\"image-item\">Comments <span class=\"image-elem\">${comments}</span></div>\n       <div class=\"image-item\">Downloads <span class=\"image-elem\">${downloads}</span></div>\n  </figcaption>\n  </figure>\n  </a>\n  `;\n}","const galleryContainer = document.querySelector('.gallery');\n\nconst searchForm = document.querySelector('.search-form');\n\nconst loaderContainer = document.querySelector('.loader');\n\nconst loaderScrollContainer = document.querySelector('.loader-scroll');\n\nexport default {\n  galleryContainer,\n  searchForm,\n  loaderContainer,\n  loaderScrollContainer,\n};","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImagesParams } from './js/api/api';\nimport { toastError, toastSuccess, toastWarning } from './js/component/izToast';\nimport { createGallery } from './js/component/gallery';\nimport selector from './js/component/selectors';\nimport { fetchImages } from './js/api/api';\nimport { GALLERY_LINK } from './js/component/gallery';\n\nlet total;\nlet endOfPageElement;\n\nconst observer = new IntersectionObserver(handleIntersection, {\n  threshold: 0,\n});\n\nselector.searchForm.addEventListener('submit', async function (event) {\n  event.preventDefault();\n  fetchImagesParams.q = event.target.elements.query.value;\n\n  if (fetchImagesParams.q === '') {\n    return;\n  }\n\n  selector.galleryContainer.innerHTML = '';\n  selector.loaderContainer.style.display = 'block';\n\n  try {\n    fetchImagesParams.page = 1;\n    const {\n      data: { hits, totalHits },\n    } = await fetchImages(fetchImagesParams.q, fetchImagesParams.page);\n\n    if (Array.isArray(hits) && hits.length > 0) {\n      const galleryHTML = hits.map(createGallery).join('');\n      selector.galleryContainer.innerHTML += galleryHTML;\n\n      const lightbox = new SimpleLightbox(`.${GALLERY_LINK}`);\n\n      lightbox.refresh();\n\n      endOfPageElement =\n        selector.galleryContainer.children[\n          selector.galleryContainer.children.length - 1\n        ];\n\n      observer.observe(endOfPageElement);\n\n      total = totalHits;\n\n      toastSuccess(`Was found: ${totalHits} images`);\n    } else {\n      toastError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    }\n  } catch (error) {\n    toastError(`Error fetching images: ${error}`);\n  } finally {\n    selector.searchForm.reset();\n    selector.loaderContainer.style.display = 'none';\n  }\n});\n\nasync function handleIntersection(entries) {\n  const entry = entries[0];\n  if (Math.ceil(total / fetchImagesParams.per_page) <= fetchImagesParams.page) {\n    return toastWarning(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n  }\n\n  if (entry.isIntersecting) {\n    selector.loaderScrollContainer.style.display = 'block';\n\n    fetchImagesParams.page++;\n\n    try {\n      const {\n        data: { hits },\n      } = await fetchImages(fetchImagesParams.q, fetchImagesParams.page);\n\n      if (Array.isArray(hits) && hits.length > 0) {\n        const galleryHTML = hits.map(createGallery).join('');\n        selector.galleryContainer.innerHTML += galleryHTML;\n\n        const lightbox = new SimpleLightbox(`.${GALLERY_LINK}`);\n\n        lightbox.refresh();\n\n        endOfPageElement =\n          selector.galleryContainer.children[\n            selector.galleryContainer.children.length - 1\n          ];\n\n        observer.observe(endOfPageElement);\n      }\n    } catch (error) {\n      toastError(`Error loading images: ${error.message}`);\n    } finally {\n      selector.loaderScrollContainer.style.display = 'none';\n    }\n  }\n}"],"names":["BASE_URL","fetchImagesParams","fetchImages","q","page","axios","iconClose","iconSuccess","iconWarning","toastOptions","toastError","message","iziToast","toastSuccess","toastWarning","GALLERY_LINK","createGallery","largeImageURL","tags","webformatURL","likes","views","comments","downloads","galleryContainer","searchForm","loaderContainer","loaderScrollContainer","selector","total","endOfPageElement","observer","handleIntersection","event","hits","totalHits","galleryHTML","SimpleLightbox","error","entries","entry"],"mappings":"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"}